\section{Translationskorrektur (Jan)}

Damit der Roboter beim Aufnehmen der Karte frei im Raum umherfahren kann und ein neuer Scan trotzdem richtig in die Karte eingezeichnet wird muss zusätzlich zur Rotation auch die Translation korrigiert werden. Der grundlegende Ansatz ist dabei derselbe wie bei der Rotationskorrektur. Zunächst wird ausgehend von der Odometrie ein Mittelpunkt für die spätere Suche eines Maximums in der Korrelation berechnet. Die Odometrieposition des Roboters muss dafür allerdings zunächst mithilfe einer einfachen Rotationsmatrix um den Rotationsoffset gedreht werden. Anhand der resultierenden X- bzw. Y-Koordinate wird dann ein Index in der Korrelation bestimmt um den ein Maximum gesucht werden kann. Eine positive Translationsbewegung des Roboters führt hier zu einer Suche um einen negativen Suchindex in der zyklischen Korrelation.
Es wird nun wie bei der Rotationskorrektur auch schon in einem Bereich um den Suchindex nach einem lokalen Maximum in der Korrelation gesucht. Dies geschieht sowohl für die Translation in X- als auch für die Translation in Y-Richtung. Der initiale Suchradius betrug 1 Meter und wurde im weiteren Verlauf auf 0.75 Meter heruntergesetzt.
Das gefundene Maximum der Korrelation muss nun wieder in eine Verschiebung umgerechnet werden, wobei eine negative Verschiebung in der Korrelation einer positiven Translation und eine positive Verschiebung einer negativen Translation entspricht.
Die gefundenen Translationsänderungen werden nun auf einen globalen Translationsoffset aufaddiert und der Scan um den neuen globalen Translationsoffset korrigiert.
Jetzt kann der Scan passend in die Karte eingezeichnet werden.

%TODO bild